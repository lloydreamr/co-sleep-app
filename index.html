<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Co-Sleep - Find Quiet Presence</title>
    
    <!-- Performance optimizations -->
    <meta name="description" content="Find quiet presence with Co-Sleep - A WebRTC-based co-sleeping app">
    <meta name="theme-color" content="#1a1a1a">
    <link rel="preconnect" href="https://httpbin.org">
    <link rel="dns-prefetch" href="https://httpbin.org">
    
    <!-- Preload critical resources -->
    <link rel="preload" href="styles.css" as="style">
    <link rel="preload" href="script.js" as="script">
    <link rel="preload" href="/socket.io/socket.io.js" as="script">
    
    <!-- Socket.IO -->
    <script src="/socket.io/socket.io.js"></script>
    
    <!-- Styles -->
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    
</head>
<body>
    <!-- Main Interface -->
    <div class="main-interface">
        <!-- Header -->
        <header class="moodist-header">
            <div class="header-top">
                <div class="online-count" id="onlineCount">
                    <span class="count-icon" aria-hidden="true">üë•</span>
                    <span class="count-text">0 online</span>
                </div>
                <button class="login-btn" id="loginBtn" aria-label="Login">
                    <span class="login-icon" aria-hidden="true">üë§</span>
                    <span class="login-text">Login</span>
                </button>
            </div>
            <h1>Co-Sleep</h1>
            <p>Find Quiet Presence</p>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Core MVP Interface -->
            <div class="core-interface">
                <button class="main-play-button" id="mainPlayBtn" aria-label="Find Quiet Presence">
                    <span class="play-icon" aria-hidden="true">‚ñ∂</span>
                    <span class="button-text">Find Quiet Presence</span>
                </button>
            </div>
        </main>

        <!-- Preferences Button (Bottom Right) -->
        <button class="preferences-btn" id="preferencesBtn" aria-label="Preferences">
            <span class="preferences-icon" aria-hidden="true">‚öô</span>
        </button>
    </div>

    <!-- Preferences Overlay -->
    <div class="preferences-overlay" id="preferencesOverlay" role="dialog" aria-labelledby="preferences-title" aria-hidden="true">
        <div class="preferences-panel">
            <div class="preferences-header">
                <h2 id="preferences-title">Preferences</h2>
                <button class="close-btn" id="closePreferencesBtn" aria-label="Close preferences">√ó</button>
            </div>
            
            <div class="preferences-content">
                <!-- Background Sounds Section -->
                <section class="preferences-section">
                    <h3>Background Sounds</h3>
                    <div class="sound-controls">
                        <button class="sound-count-btn" id="soundCountBtn" aria-label="Open sound panel">
                            <span class="sound-icon" aria-hidden="true">üéµ</span>
                            <span class="count-text">6 Sounds</span>
                        </button>
                    </div>
                </section>

                <!-- Future Features Placeholder -->
                <section class="preferences-section">
                    <h3>Features</h3>
                    <div class="feature-list">
                        <button class="feature-item" aria-label="Sleep Timer">
                            <span class="feature-icon" aria-hidden="true">‚è∞</span>
                            <span class="feature-text">Sleep Timer</span>
                        </button>
                        <button class="feature-item" aria-label="Notepad">
                            <span class="feature-icon" aria-hidden="true">üìù</span>
                            <span class="feature-text">Notepad</span>
                        </button>
                        <button class="feature-item" aria-label="Todo Checklist">
                            <span class="feature-icon" aria-hidden="true">‚úÖ</span>
                            <span class="feature-text">Todo Checklist</span>
                        </button>
                        <button class="feature-item" aria-label="Breathing Exercise">
                            <span class="feature-icon" aria-hidden="true">ü´Å</span>
                            <span class="feature-text">Breathing Exercise</span>
                        </button>
                    </div>
                </section>
            </div>
        </div>
    </div>

    <!-- Sound Panel (Hidden by default) -->
    <div class="sound-panel" id="soundPanel" role="dialog" aria-labelledby="sound-panel-title" aria-hidden="true">
        <div class="sound-panel-header">
            <h3 id="sound-panel-title">Background Sounds</h3>
            <button class="close-btn" id="closeSoundBtn" aria-label="Close sound panel">√ó</button>
        </div>
        
        <div class="sound-list">
            <div class="sound-item" data-sound="rain">
                <button class="sound-toggle" data-sound="rain" aria-label="Play rain sound">
                    <span class="play-icon" aria-hidden="true">‚ñ∂</span>
                </button>
                <span class="sound-label">Rain</span>
                <input type="range" class="volume-slider" data-sound="rain" min="0" max="100" value="30" aria-label="Rain volume">
            </div>
            
            <div class="sound-item" data-sound="ocean">
                <button class="sound-toggle" data-sound="ocean" aria-label="Play ocean sound">
                    <span class="play-icon" aria-hidden="true">‚ñ∂</span>
                </button>
                <span class="sound-label">Ocean</span>
                <input type="range" class="volume-slider" data-sound="ocean" min="0" max="100" value="30" aria-label="Ocean volume">
            </div>
            
            <div class="sound-item" data-sound="forest">
                <button class="sound-toggle" data-sound="forest" aria-label="Play forest sound">
                    <span class="play-icon" aria-hidden="true">‚ñ∂</span>
                </button>
                <span class="sound-label">Forest</span>
                <input type="range" class="volume-slider" data-sound="forest" min="0" max="100" value="30" aria-label="Forest volume">
            </div>
            
            <div class="sound-item" data-sound="fire">
                <button class="sound-toggle" data-sound="fire" aria-label="Play fire sound">
                    <span class="play-icon" aria-hidden="true">‚ñ∂</span>
                </button>
                <span class="sound-label">Fire</span>
                <input type="range" class="volume-slider" data-sound="fire" min="0" max="100" value="30" aria-label="Fire volume">
            </div>
            
            <div class="sound-item" data-sound="whitenoise">
                <button class="sound-toggle" data-sound="whitenoise" aria-label="Play white noise">
                    <span class="play-icon" aria-hidden="true">‚ñ∂</span>
                </button>
                <span class="sound-label">White Noise</span>
                <input type="range" class="volume-slider" data-sound="whitenoise" min="0" max="100" value="30" aria-label="White noise volume">
            </div>
            
            <div class="sound-item" data-sound="cafe">
                <button class="sound-toggle" data-sound="cafe" aria-label="Play cafe sound">
                    <span class="play-icon" aria-hidden="true">‚ñ∂</span>
                </button>
                <span class="sound-label">Cafe</span>
                <input type="range" class="volume-slider" data-sound="cafe" min="0" max="100" value="30" aria-label="Cafe volume">
            </div>
        </div>
    </div>

    <!-- Call Interface (Hidden by default) -->
    <div class="call-interface" id="callInterface" role="dialog" aria-labelledby="call-status" aria-hidden="true">
        <div class="call-header">
            <h2>Connected</h2>
            <p id="statusText">Connected</p>
        </div>
        
        <div class="call-controls">
            <button class="mute-btn" id="muteBtn" aria-label="Toggle mute">
                <span class="mute-icon" aria-hidden="true">üé§</span>
            </button>
            <button class="end-call-btn" id="endCallBtn" aria-label="End call">
                <span class="end-icon" aria-hidden="true">üìû</span>
            </button>
        </div>
    </div>

    <!-- Loading Interface -->
    <div class="loading-interface" id="loadingInterface" role="status" aria-live="polite" aria-hidden="true">
        <div class="loading-content">
            <div class="loading-spinner" aria-hidden="true"></div>
            <p id="loadingText">Finding partner...</p>
        </div>
    </div>

    <!-- Error Interface -->
    <div class="error-interface" id="errorInterface" role="alert" aria-live="assertive" aria-hidden="true">
        <div class="error-content">
            <h2>Connection Error</h2>
            <p id="errorText">Unable to connect. Please try again.</p>
            <button class="retry-btn" id="retryBtn">Retry</button>
        </div>
    </div>

    <!-- Scripts with performance optimizations -->
    <script src="sounds.js" defer></script>
    <script src="preferences.js" defer></script>
    <script src="script.js" defer></script>
</body>
</html>
