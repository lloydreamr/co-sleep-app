<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Co-Sleep - Find Quiet Presence</title>
    
    <!-- Performance optimizations -->
    <meta name="description" content="Find quiet presence with Co-Sleep - A WebRTC-based co-sleeping app">
    <meta name="theme-color" content="#1a1a1a">
    
    <!-- Preload critical resources -->
    <link rel="preload" href="styles.css?v=1.1" as="style">
    <link rel="preload" href="script.js?v=1.1" as="script">
    <link rel="preload" href="/socket.io/socket.io.js" as="script">
    
    <!-- Socket.IO -->
    <script src="/socket.io/socket.io.js"></script>
    
    <!-- Styles -->
    <link rel="stylesheet" href="styles.css?v=1.1">
    
</head>
<body>
    <!-- Main Interface (Hero Section) -->
    <section class="hero-section" id="heroSection">
        <header class="moodist-header">
            <h1>Co-Sleep</h1>
            <p>Find Quiet Presence</p>
        </header>
        <main class="main-content">
            <div class="core-interface">
                <button class="main-play-button" id="mainPlayBtn" aria-label="Find Quiet Presence">
                    <span class="play-icon" aria-hidden="true">â–¶</span>
                    <span class="button-text">Find Quiet Presence</span>
                </button>
            </div>
        </main>
        <!-- Down Arrow -->
        <button class="down-arrow" id="downArrowBtn" aria-label="See background sounds" tabindex="0">
            <span aria-hidden="true">&#8595;</span>
        </button>
        <!-- Preferences Button (Blank/Disabled) -->
        <button class="preferences-btn disabled" id="preferencesBtn" aria-label="Preferences" disabled></button>
    </section>

    <!-- Background Sounds Section -->
    <section class="background-sounds-section" id="backgroundSoundsSection">
        <h2>Background Sounds</h2>
        <div class="sound-list" id="soundList">
            <div class="sound-empty-state" id="soundEmptyState" style="display:none;">
                <p>No background sounds available.<br>Check your connection or try again later.</p>
            </div>
        </div>
    </section>

    <!-- Call Interface (Hidden by default) -->
    <div class="call-interface" id="callInterface" role="dialog" aria-labelledby="call-status" aria-hidden="true">
        <div class="call-header">
            <h2>Connected</h2>
            <p id="statusText">Connected</p>
        </div>
        <div class="call-controls">
            <button class="mute-btn" id="muteBtn" aria-label="Toggle mute">
                <span class="mute-icon" aria-hidden="true">ðŸŽ¤</span>
            </button>
            <button class="end-call-btn" id="endCallBtn" aria-label="End call">
                <span class="end-icon" aria-hidden="true">ðŸ“ž</span>
            </button>
        </div>
    </div>

    <!-- Loading Interface -->
    <div class="loading-interface" id="loadingInterface" role="status" aria-live="polite" aria-hidden="true">
        <div class="loading-content">
            <div class="loading-spinner" aria-hidden="true"></div>
            <p id="loadingText">Finding partner...</p>
            <button class="cancel-queue-btn" id="cancelQueueBtn" aria-label="Cancel finding partner">Cancel</button>
        </div>
    </div>

    <!-- Error Interface -->
    <div class="error-interface" id="errorInterface" role="alert" aria-live="assertive" aria-hidden="true">
        <div class="error-content">
            <h2>Connection Error</h2>
            <p id="errorText">Unable to connect. Please try again.</p>
            <button class="retry-btn" id="retryBtn">Retry</button>
        </div>
    </div>

    <!-- Scripts with performance optimizations -->
    <script src="sounds.js?v=1.1" defer></script>
    <script src="preferences.js?v=1.1" defer></script>
    <script src="script.js?v=1.1" defer></script>
</body>
</html>
